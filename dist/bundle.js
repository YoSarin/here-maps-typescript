!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);var r,o=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function u(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}c((r=r.apply(e,t||[])).next())}))},i=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}};!function(e){e[e.Off=0]="Off",e[e.Loading=1]="Loading",e[e.Ready=2]="Ready"}(r||(r={}));var a=function(){function e(e){this.Latitude=e.Latitude,this.Longitude=e.Longitude}return e.prototype.AsGeo=function(){return"geo!"+this.Latitude+","+this.Longitude},e}(),u=function(){function e(e){this.platform=new H.service.Platform({apikey:e})}return e.OnReady=function(t){e.status==r.Ready&&t(),e.callbacks.push(t),e.Init()},e.Init=function(){if(e.status==r.Off){e.status=r.Loading;var t=document.getElementsByTagName("head")[0],n=e.createScriptElement(e.coreLink);n.onload=function(){var n=e.createScriptElement(e.serviceLink);n.onload=function(){var n=e.createScriptElement(e.eventsLink);n.onload=function(){var n=e.createScriptElement(e.uiLink),r=e.createLinkElement(e.uiCssLink);n.onload=function(){e.TriggerReady()},t.appendChild(n),t.appendChild(r)},t.appendChild(n)},t.appendChild(n)},t.appendChild(n)}},e.TriggerReady=function(){e.status=r.Ready;for(var t=e.callbacks.pop();t;t=e.callbacks.pop())t()},e.createScriptElement=function(e,t,n){void 0===t&&(t="text/javascript"),void 0===n&&(n="utf-8");var r=document.createElement("script");return r.setAttribute("src",e),r.setAttribute("type",t),r.setAttribute("charset",n),r},e.createLinkElement=function(e,t,n){void 0===t&&(t="text/css"),void 0===n&&(n="stylesheet");var r=document.createElement("link");return r.setAttribute("href",e),r.setAttribute("type",t),r.setAttribute("rel",n),r},e.prototype.CreateMap=function(e,t){void 0===t&&(t={zoom:10,center:{lat:52.5,lng:12}});var n=this.platform.createDefaultLayers(),r=new H.Map(e,n.vector.normal.map,t);console.log(r);H.ui.UI.createDefault(r,n);var o=new H.mapevents.MapEvents(r);new H.mapevents.Behavior(o);return r},e.prototype.Search=function(e){return o(this,void 0,void 0,(function(){var t=this;return i(this,(function(n){return[2,new Promise((function(n,r){if(e.searchText.IsCoords()){var o=e.searchText.split(",");n(new a({Latitude:parseFloat(o[0].trim()),Longitude:parseFloat(o[1].trim())}))}else{t.platform.getGeocodingService().geocode(e,(function(e){var t=new a(e.Response.View[0].Result[0].Location.DisplayPosition);n(t)}),(function(e){r(e)}))}}))]}))}))},e.prototype.ShowRoute=function(e,t){return o(this,void 0,void 0,(function(){var n,r=this;return i(this,(function(o){return n=this.CreateMap(e),[2,new Promise((function(e,o){r.platform.getRoutingService().calculateRoute(t,(function(t){r.drawRouteToMap(t,n),e()}),(function(e){return o(e)}))}))]}))}))},e.prototype.drawRouteToMap=function(e,t){var n,r,o;if(e.response.route){r=(n=e.response.route[0]).shape,o=new H.geo.LineString,r.forEach((function(e){var t=e.split(",");o.pushLatLngAlt(t[0],t[1])})),n.waypoint[0].mappedPosition,n.waypoint[1].mappedPosition;var i=new H.map.Polyline(o,{style:{strokeColor:"blue",lineWidth:3}});t.addObjects([i]),t.getViewModel().setLookAtData({bounds:i.getBoundingBox()})}},e.coreLink="https://js.api.here.com/v3/3.1/mapsjs-core.js",e.serviceLink="https://js.api.here.com/v3/3.1/mapsjs-service.js",e.eventsLink="https://js.api.here.com/v3/3.1/mapsjs-mapevents.js",e.uiLink="https://js.api.here.com/v3/3.1/mapsjs-ui.js",e.uiCssLink="https://js.api.here.com/v3/3.1/mapsjs-ui.css",e.status=r.Off,e.callbacks=[],e}();String.prototype.IsCoords=function(){return/^(\d+((\.|,)\d+)?\s*,\s*\d+((\.|,)\d+)?)$/.test(this)};var c=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function u(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}c((r=r.apply(e,t||[])).next())}))},s=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}};u.OnReady((function(){return c(void 0,void 0,void 0,(function(){var e,t,n;return s(this,(function(r){switch(r.label){case 0:return"ejTEZJO50XcYpGX-FudQXN6PE6X9BiMdTu8eRGiMj_s",(e=new u("ejTEZJO50XcYpGX-FudQXN6PE6X9BiMdTu8eRGiMj_s")).CreateMap(document.getElementById("mapContainer"),{zoom:10,center:{lat:51,lng:12}}),[4,e.Search({searchText:"Rudoltice 50, 788 16 SobotÃ­n, Czech Republic"})];case 1:return t=r.sent(),[4,e.Search({searchText:"49.98847,17.44278"})];case 2:return n=r.sent(),console.log(t),console.log(n),e.ShowRoute(document.getElementById("routeContainer"),{waypoint0:t.AsGeo(),waypoint1:n.AsGeo(),mode:"fastest;car",representation:"display"}),[2]}}))}))}))}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2hlcmVtYXBzLm1vZHVsZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXgudHMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJIZXJlU3RhdHVzIiwiY29vcmRzIiwidGhpcyIsIkxhdGl0dWRlIiwiTG9uZ2l0dWRlIiwiQXNHZW8iLCJhcGlLZXkiLCJwbGF0Zm9ybSIsIkgiLCJzZXJ2aWNlIiwiUGxhdGZvcm0iLCJPblJlYWR5IiwiY2FsbGJhY2siLCJIZXJlTWFwcyIsInN0YXR1cyIsIlJlYWR5IiwiY2FsbGJhY2tzIiwicHVzaCIsIkluaXQiLCJPZmYiLCJMb2FkaW5nIiwiaGVhZCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJjb3JlIiwiY3JlYXRlU2NyaXB0RWxlbWVudCIsImNvcmVMaW5rIiwib25sb2FkIiwic2VydmljZUxpbmsiLCJldmVudHMiLCJldmVudHNMaW5rIiwidWkiLCJ1aUxpbmsiLCJ1aUNzcyIsImNyZWF0ZUxpbmtFbGVtZW50IiwidWlDc3NMaW5rIiwiVHJpZ2dlclJlYWR5IiwiYXBwZW5kQ2hpbGQiLCJwb3AiLCJzcmMiLCJ0eXBlIiwiY2hhcnNldCIsImxpbmsiLCJjcmVhdGVFbGVtZW50Iiwic2V0QXR0cmlidXRlIiwicmVsIiwiQ3JlYXRlTWFwIiwiZWxlbWVudCIsIm9wdGlvbnMiLCJ6b29tIiwiY2VudGVyIiwibGF0IiwibG5nIiwiZGVmYXVsdExheWVycyIsImNyZWF0ZURlZmF1bHRMYXllcnMiLCJtYXAiLCJNYXAiLCJ2ZWN0b3IiLCJub3JtYWwiLCJjb25zb2xlIiwibG9nIiwiVUkiLCJjcmVhdGVEZWZhdWx0IiwibWFwZXZlbnRzIiwiTWFwRXZlbnRzIiwiQmVoYXZpb3IiLCJTZWFyY2giLCJwYXJhbXMiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsInNlYXJjaFRleHQiLCJJc0Nvb3JkcyIsInNwbGl0dGVkIiwic3BsaXQiLCJQb3NpdGlvbiIsInBhcnNlRmxvYXQiLCJ0cmltIiwiZ2V0R2VvY29kaW5nU2VydmljZSIsImdlb2NvZGUiLCJyZXNwb25zZSIsInJlc3VsdCIsIlJlc3BvbnNlIiwiVmlldyIsIlJlc3VsdCIsIkxvY2F0aW9uIiwiRGlzcGxheVBvc2l0aW9uIiwiZXJyb3IiLCJTaG93Um91dGUiLCJnZXRSb3V0aW5nU2VydmljZSIsImNhbGN1bGF0ZVJvdXRlIiwiZHJhd1JvdXRlVG9NYXAiLCJyb3V0ZSIsInJvdXRlU2hhcGUiLCJsaW5lc3RyaW5nIiwic2hhcGUiLCJnZW8iLCJMaW5lU3RyaW5nIiwiZm9yRWFjaCIsInBvaW50IiwicGFydHMiLCJwdXNoTGF0TG5nQWx0Iiwid2F5cG9pbnQiLCJtYXBwZWRQb3NpdGlvbiIsInJvdXRlTGluZSIsIlBvbHlsaW5lIiwic3R5bGUiLCJzdHJva2VDb2xvciIsImxpbmVXaWR0aCIsImFkZE9iamVjdHMiLCJnZXRWaWV3TW9kZWwiLCJzZXRMb29rQXREYXRhIiwiYm91bmRzIiwiZ2V0Qm91bmRpbmdCb3giLCJTdHJpbmciLCJ0ZXN0IiwiTWFwcyIsImdldEVsZW1lbnRCeUlkIiwicGxhY2UxIiwicGxhY2UyIiwid2F5cG9pbnQwIiwid2F5cG9pbnQxIiwicmVwcmVzZW50YXRpb24iXSwibWFwcGluZ3Mi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QU9sSCxRQUNsQmxCLEtBQU0sY0FDTnVJLGVBQWdCLFkiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiZGVjbGFyZSB2YXIgSDphbnlcclxuXHJcbmVudW0gSGVyZVN0YXR1cyB7XHJcbiAgT2ZmLFxyXG4gIExvYWRpbmcsXHJcbiAgUmVhZHlcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBWaWV3TW9kZWwge1xyXG4gIHNldExvb2tBdERhdGEob3B0aW9uczpNYXBPcHRpb25zKTp2b2lkXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgTWFwIHtcclxuICBhZGRPYmplY3RzKG9iamVjdHM6YW55W10pOnZvaWRcclxuICBnZXRWaWV3TW9kZWwoKTpWaWV3TW9kZWxcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBNYXBPcHRpb25zIHtcclxuICB6b29tPzpudW1iZXJcclxuICBjZW50ZXI/OntsYXQ6bnVtYmVyLCBsbmc6bnVtYmVyfVxyXG4gIGJvdW5kcz86YW55XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBQb3NpdGlvbiB7XHJcbiAgcHVibGljIExhdGl0dWRlOm51bWJlclxyXG4gIHB1YmxpYyBMb25naXR1ZGU6bnVtYmVyXHJcblxyXG4gIHB1YmxpYyBjb25zdHJ1Y3Rvcihjb29yZHM6e0xhdGl0dWRlOm51bWJlciwgTG9uZ2l0dWRlOm51bWJlcn0pIHtcclxuICAgIHRoaXMuTGF0aXR1ZGUgPSBjb29yZHMuTGF0aXR1ZGVcclxuICAgIHRoaXMuTG9uZ2l0dWRlID0gY29vcmRzLkxvbmdpdHVkZVxyXG4gIH1cclxuXHJcbiAgcHVibGljIEFzR2VvKCk6c3RyaW5nIHtcclxuICAgIHJldHVybiBgZ2VvISR7dGhpcy5MYXRpdHVkZX0sJHt0aGlzLkxvbmdpdHVkZX1gXHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFJvdXRlT3B0aW9ucyB7XHJcbiAgbW9kZTpzdHJpbmdcclxuICByZXByZXNlbnRhdGlvbjpzdHJpbmdcclxuICB3YXlwb2ludDA6c3RyaW5nXHJcbiAgd2F5cG9pbnQxOnN0cmluZ1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFNlYXJjaFBhcmFtcyB7XHJcbiAgc2VhcmNoVGV4dDpzdHJpbmdcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEhlcmVNYXBzIHtcclxuXHJcbiAgcHJpdmF0ZSBzdGF0aWMgY29yZUxpbms6c3RyaW5nID0gXCJodHRwczovL2pzLmFwaS5oZXJlLmNvbS92My8zLjEvbWFwc2pzLWNvcmUuanNcIlxyXG4gIHByaXZhdGUgc3RhdGljIHNlcnZpY2VMaW5rOnN0cmluZyA9IFwiaHR0cHM6Ly9qcy5hcGkuaGVyZS5jb20vdjMvMy4xL21hcHNqcy1zZXJ2aWNlLmpzXCJcclxuICBwcml2YXRlIHN0YXRpYyBldmVudHNMaW5rOnN0cmluZyA9IFwiaHR0cHM6Ly9qcy5hcGkuaGVyZS5jb20vdjMvMy4xL21hcHNqcy1tYXBldmVudHMuanNcIlxyXG4gIHByaXZhdGUgc3RhdGljIHVpTGluazpzdHJpbmcgPSBcImh0dHBzOi8vanMuYXBpLmhlcmUuY29tL3YzLzMuMS9tYXBzanMtdWkuanNcIlxyXG4gIHByaXZhdGUgc3RhdGljIHVpQ3NzTGluazpzdHJpbmcgPSBcImh0dHBzOi8vanMuYXBpLmhlcmUuY29tL3YzLzMuMS9tYXBzanMtdWkuY3NzXCJcclxuXHJcbiAgcHJpdmF0ZSBzdGF0aWMgc3RhdHVzOkhlcmVTdGF0dXMgPSBIZXJlU3RhdHVzLk9mZjtcclxuICBwcml2YXRlIHN0YXRpYyBjYWxsYmFja3M6KCgpID0+IHZvaWQpW10gPSBbXTtcclxuXHJcbiAgcHJpdmF0ZSBwbGF0Zm9ybTphbnk7XHJcblxyXG4gIGNvbnN0cnVjdG9yKGFwaUtleTpzdHJpbmcpIHtcclxuICAgIHRoaXMucGxhdGZvcm0gPSBuZXcgSC5zZXJ2aWNlLlBsYXRmb3JtKHtcclxuICAgICAgJ2FwaWtleSc6IGFwaUtleVxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgT25SZWFkeShjYWxsYmFjazooKSA9PiB2b2lkKSB7XHJcbiAgICBpZiAoSGVyZU1hcHMuc3RhdHVzID09IEhlcmVTdGF0dXMuUmVhZHkpIHtcclxuICAgICAgY2FsbGJhY2soKTtcclxuICAgIH1cclxuICAgIEhlcmVNYXBzLmNhbGxiYWNrcy5wdXNoKGNhbGxiYWNrKVxyXG4gICAgSGVyZU1hcHMuSW5pdCgpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBzdGF0aWMgSW5pdCgpIHtcclxuICAgIGlmIChIZXJlTWFwcy5zdGF0dXMgPT0gSGVyZVN0YXR1cy5PZmYpIHtcclxuICAgICAgSGVyZU1hcHMuc3RhdHVzID0gSGVyZVN0YXR1cy5Mb2FkaW5nXHJcbiAgICAgIHZhciBoZWFkID0gPEhUTUxFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaGVhZFwiKVswXVxyXG4gICAgICB2YXIgY29yZSA9IEhlcmVNYXBzLmNyZWF0ZVNjcmlwdEVsZW1lbnQoSGVyZU1hcHMuY29yZUxpbmspXHJcbiAgICAgIGNvcmUub25sb2FkID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIHNlcnZpY2UgPSBIZXJlTWFwcy5jcmVhdGVTY3JpcHRFbGVtZW50KEhlcmVNYXBzLnNlcnZpY2VMaW5rKVxyXG4gICAgICAgIHNlcnZpY2Uub25sb2FkID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICB2YXIgZXZlbnRzID0gSGVyZU1hcHMuY3JlYXRlU2NyaXB0RWxlbWVudChIZXJlTWFwcy5ldmVudHNMaW5rKVxyXG4gICAgICAgICAgZXZlbnRzLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgdWkgPSBIZXJlTWFwcy5jcmVhdGVTY3JpcHRFbGVtZW50KEhlcmVNYXBzLnVpTGluaylcclxuICAgICAgICAgICAgdmFyIHVpQ3NzID0gSGVyZU1hcHMuY3JlYXRlTGlua0VsZW1lbnQoSGVyZU1hcHMudWlDc3NMaW5rKVxyXG4gICAgICAgICAgICB1aS5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgSGVyZU1hcHMuVHJpZ2dlclJlYWR5KClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBoZWFkLmFwcGVuZENoaWxkKHVpKTtcclxuICAgICAgICAgICAgaGVhZC5hcHBlbmRDaGlsZCh1aUNzcylcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGhlYWQuYXBwZW5kQ2hpbGQoZXZlbnRzKVxyXG4gICAgICAgIH1cclxuICAgICAgICBoZWFkLmFwcGVuZENoaWxkKHNlcnZpY2UpXHJcbiAgICAgIH1cclxuICAgICAgaGVhZC5hcHBlbmRDaGlsZChjb3JlKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgc3RhdGljIFRyaWdnZXJSZWFkeSgpIHtcclxuICAgIEhlcmVNYXBzLnN0YXR1cyA9IEhlcmVTdGF0dXMuUmVhZHk7XHJcbiAgICBmb3IgKHZhciBjYWxsYmFjayA9IEhlcmVNYXBzLmNhbGxiYWNrcy5wb3AoKTsgY2FsbGJhY2s7IGNhbGxiYWNrID0gSGVyZU1hcHMuY2FsbGJhY2tzLnBvcCgpKSB7XHJcbiAgICAgIGNhbGxiYWNrKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHN0YXRpYyBjcmVhdGVTY3JpcHRFbGVtZW50KHNyYzpzdHJpbmcsIHR5cGU6c3RyaW5nPVwidGV4dC9qYXZhc2NyaXB0XCIsIGNoYXJzZXQ6c3RyaW5nPVwidXRmLThcIik6SFRNTFNjcmlwdEVsZW1lbnQge1xyXG4gICAgdmFyIGxpbmsgPSA8SFRNTFNjcmlwdEVsZW1lbnQ+KGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIikpXHJcbiAgICBsaW5rLnNldEF0dHJpYnV0ZShcInNyY1wiLCBzcmMpXHJcbiAgICBsaW5rLnNldEF0dHJpYnV0ZShcInR5cGVcIiwgdHlwZSlcclxuICAgIGxpbmsuc2V0QXR0cmlidXRlKFwiY2hhcnNldFwiLCBjaGFyc2V0KVxyXG4gICAgcmV0dXJuIGxpbmtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgc3RhdGljIGNyZWF0ZUxpbmtFbGVtZW50KHNyYzpzdHJpbmcsIHR5cGU6c3RyaW5nPVwidGV4dC9jc3NcIiwgcmVsOnN0cmluZz1cInN0eWxlc2hlZXRcIik6SFRNTExpbmtFbGVtZW50IHtcclxuICAgIHZhciBsaW5rID0gPEhUTUxMaW5rRWxlbWVudD4oZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpbmtcIikpXHJcbiAgICBsaW5rLnNldEF0dHJpYnV0ZShcImhyZWZcIiwgc3JjKVxyXG4gICAgbGluay5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIHR5cGUpXHJcbiAgICBsaW5rLnNldEF0dHJpYnV0ZShcInJlbFwiLCByZWwpXHJcbiAgICByZXR1cm4gbGlua1xyXG4gIH1cclxuXHJcbiAgcHVibGljIENyZWF0ZU1hcChlbGVtZW50OkhUTUxFbGVtZW50LCBvcHRpb25zOk1hcE9wdGlvbnMgPSAgeyB6b29tOiAxMCwgY2VudGVyOiB7IGxhdDogNTIuNSwgbG5nOiAxMi4wfSB9KTpNYXAge1xyXG4gICAgdmFyIGRlZmF1bHRMYXllcnMgPSB0aGlzLnBsYXRmb3JtLmNyZWF0ZURlZmF1bHRMYXllcnMoKTtcclxuICAgIHZhciBtYXAgPSA8TWFwPm5ldyBILk1hcChcclxuICAgICAgZWxlbWVudCxcclxuICAgICAgZGVmYXVsdExheWVycy52ZWN0b3Iubm9ybWFsLm1hcCxcclxuICAgICAgb3B0aW9uc1xyXG4gICAgKVxyXG5cclxuICAgIGNvbnNvbGUubG9nKG1hcClcclxuXHJcbiAgICB2YXIgdWkgPSBILnVpLlVJLmNyZWF0ZURlZmF1bHQobWFwLCBkZWZhdWx0TGF5ZXJzKVxyXG4gICAgdmFyIGV2ZW50cyA9IG5ldyBILm1hcGV2ZW50cy5NYXBFdmVudHMobWFwKVxyXG4gICAgdmFyIGJlaGF2aW9yID0gbmV3IEgubWFwZXZlbnRzLkJlaGF2aW9yKGV2ZW50cylcclxuXHJcbiAgICByZXR1cm4gbWFwXHJcbiAgfVxyXG5cclxuICBwdWJsaWMgYXN5bmMgU2VhcmNoKHBhcmFtczpTZWFyY2hQYXJhbXMpOlByb21pc2U8UG9zaXRpb24+IHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZTxQb3NpdGlvbj4oXHJcbiAgICAgIChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICBpZiAocGFyYW1zLnNlYXJjaFRleHQuSXNDb29yZHMoKSkge1xyXG4gICAgICAgICAgdmFyIHNwbGl0dGVkID0gcGFyYW1zLnNlYXJjaFRleHQuc3BsaXQoJywnKTtcclxuICAgICAgICAgIHJlc29sdmUobmV3IFBvc2l0aW9uKHtMYXRpdHVkZTogcGFyc2VGbG9hdChzcGxpdHRlZFswXS50cmltKCkpLCBMb25naXR1ZGU6IHBhcnNlRmxvYXQoc3BsaXR0ZWRbMV0udHJpbSgpKX0pKTtcclxuICAgICAgICAgIHJldHVyblxyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgZ2VvY29kZXIgPSB0aGlzLnBsYXRmb3JtLmdldEdlb2NvZGluZ1NlcnZpY2UoKVxyXG4gICAgICAgIGdlb2NvZGVyLmdlb2NvZGUoXHJcbiAgICAgICAgICBwYXJhbXMsXHJcbiAgICAgICAgICAocmVzcG9uc2U6YW55KSA9PiB7XHJcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBuZXcgUG9zaXRpb24ocmVzcG9uc2UuUmVzcG9uc2UuVmlld1swXS5SZXN1bHRbMF0uTG9jYXRpb24uRGlzcGxheVBvc2l0aW9uKVxyXG4gICAgICAgICAgICByZXNvbHZlKHJlc3VsdClcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICAoZXJyb3I6YW55KSA9PiB7XHJcbiAgICAgICAgICAgIHJlamVjdChlcnJvcilcclxuICAgICAgICAgIH1cclxuICAgICAgICApXHJcbiAgICAgIH1cclxuICAgIClcclxuICB9XHJcblxyXG4gIHB1YmxpYyBhc3luYyBTaG93Um91dGUoZWxlbWVudDpIVE1MRWxlbWVudCwgb3B0aW9uczpSb3V0ZU9wdGlvbnMpOlByb21pc2U8dm9pZD4ge1xyXG4gICAgdmFyIG1hcCA9IHRoaXMuQ3JlYXRlTWFwKGVsZW1lbnQpXHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoXHJcbiAgICAgIChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICB0aGlzLnBsYXRmb3JtLmdldFJvdXRpbmdTZXJ2aWNlKCkuY2FsY3VsYXRlUm91dGUoXHJcbiAgICAgICAgICBvcHRpb25zLFxyXG4gICAgICAgICAgKHJlc3VsdDphbnkpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5kcmF3Um91dGVUb01hcChyZXN1bHQsIG1hcClcclxuICAgICAgICAgICAgcmVzb2x2ZSgpXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgKGVycm9yOmFueSkgPT4gcmVqZWN0KGVycm9yKSlcclxuICAgICAgfVxyXG4gICAgKVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBkcmF3Um91dGVUb01hcChyZXN1bHQ6YW55LCBtYXA6TWFwKTp2b2lkIHtcclxuICAgIHZhciByb3V0ZSwgcm91dGVTaGFwZSwgc3RhcnRQb2ludCwgZW5kUG9pbnQsIGxpbmVzdHJpbmc6YW55O1xyXG4gICAgaWYocmVzdWx0LnJlc3BvbnNlLnJvdXRlKSB7XHJcbiAgICAgIC8vIFBpY2sgdGhlIGZpcnN0IHJvdXRlIGZyb20gdGhlIHJlc3BvbnNlOlxyXG4gICAgICByb3V0ZSA9IHJlc3VsdC5yZXNwb25zZS5yb3V0ZVswXTtcclxuICAgICAgLy8gUGljayB0aGUgcm91dGUncyBzaGFwZTpcclxuICAgICAgcm91dGVTaGFwZSA9IHJvdXRlLnNoYXBlO1xyXG5cclxuICAgICAgLy8gQ3JlYXRlIGEgbGluZXN0cmluZyB0byB1c2UgYXMgYSBwb2ludCBzb3VyY2UgZm9yIHRoZSByb3V0ZSBsaW5lXHJcbiAgICAgIGxpbmVzdHJpbmcgPSBuZXcgSC5nZW8uTGluZVN0cmluZygpO1xyXG5cclxuICAgICAgLy8gUHVzaCBhbGwgdGhlIHBvaW50cyBpbiB0aGUgc2hhcGUgaW50byB0aGUgbGluZXN0cmluZzpcclxuICAgICAgcm91dGVTaGFwZS5mb3JFYWNoKGZ1bmN0aW9uKHBvaW50OnN0cmluZykge1xyXG4gICAgICAgIHZhciBwYXJ0cyA9IHBvaW50LnNwbGl0KCcsJyk7XHJcbiAgICAgICAgbGluZXN0cmluZy5wdXNoTGF0TG5nQWx0KHBhcnRzWzBdLCBwYXJ0c1sxXSk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLy8gUmV0cmlldmUgdGhlIG1hcHBlZCBwb3NpdGlvbnMgb2YgdGhlIHJlcXVlc3RlZCB3YXlwb2ludHM6XHJcbiAgICAgIHN0YXJ0UG9pbnQgPSByb3V0ZS53YXlwb2ludFswXS5tYXBwZWRQb3NpdGlvbjtcclxuICAgICAgZW5kUG9pbnQgPSByb3V0ZS53YXlwb2ludFsxXS5tYXBwZWRQb3NpdGlvbjtcclxuXHJcbiAgICAgIC8vIENyZWF0ZSBhIHBvbHlsaW5lIHRvIGRpc3BsYXkgdGhlIHJvdXRlOlxyXG4gICAgICB2YXIgcm91dGVMaW5lID0gbmV3IEgubWFwLlBvbHlsaW5lKGxpbmVzdHJpbmcsIHtcclxuICAgICAgICBzdHlsZTogeyBzdHJva2VDb2xvcjogJ2JsdWUnLCBsaW5lV2lkdGg6IDMgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vIEFkZCB0aGUgcm91dGUgcG9seWxpbmUgYW5kIHRoZSB0d28gbWFya2VycyB0byB0aGUgbWFwOlxyXG4gICAgICBtYXAuYWRkT2JqZWN0cyhbcm91dGVMaW5lXSk7XHJcblxyXG4gICAgICAvLyBTZXQgdGhlIG1hcCdzIHZpZXdwb3J0IHRvIG1ha2UgdGhlIHdob2xlIHJvdXRlIHZpc2libGU6XHJcbiAgICAgIG1hcC5nZXRWaWV3TW9kZWwoKS5zZXRMb29rQXREYXRhKHsgYm91bmRzOiByb3V0ZUxpbmUuZ2V0Qm91bmRpbmdCb3goKSB9KTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmRlY2xhcmUgZ2xvYmFsIHtcclxuICAvKiogQ29udmVydHMgbnVtZXJpYyBkZWdyZWVzIHRvIHJhZGlhbnMgKi9cclxuICBpbnRlcmZhY2UgU3RyaW5nIHtcclxuICAgICAgSXNDb29yZHMoKTpib29sZWFuO1xyXG4gIH1cclxufVxyXG5cclxuU3RyaW5nLnByb3RvdHlwZS5Jc0Nvb3JkcyA9IGZ1bmN0aW9uKCk6Ym9vbGVhbiB7XHJcbiAgcmV0dXJuIC9eKFxcZCsoKFxcLnwsKVxcZCspP1xccyosXFxzKlxcZCsoKFxcLnwsKVxcZCspPykkLy50ZXN0KHRoaXMpXHJcbn0iLCJpbXBvcnQgeyBIZXJlTWFwcyB9IGZyb20gJy4vaGVyZW1hcHMubW9kdWxlJ1xyXG5cclxuSGVyZU1hcHMuT25SZWFkeShhc3luYyAoKSA9PiB7XHJcbiAgdmFyIGFwaUtleSA9IFwiZWpURVpKTzUwWGNZcEdYLUZ1ZFFYTjZQRTZYOUJpTWRUdThlUkdpTWpfc1wiO1xyXG4gIHZhciBNYXBzID0gbmV3IEhlcmVNYXBzKGFwaUtleSk7XHJcbiAgTWFwcy5DcmVhdGVNYXAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtYXBDb250YWluZXJcIiksIHsgem9vbTogMTAsIGNlbnRlcjogeyBsYXQ6IDUxLjAsIGxuZzogMTIuMCB9fSlcclxuXHJcbiAgdmFyIHBsYWNlMSA9IGF3YWl0IE1hcHMuU2VhcmNoKHtzZWFyY2hUZXh0OiBcIlJ1ZG9sdGljZSA1MCwgNzg4IDE2IFNvYm90w61uLCBDemVjaCBSZXB1YmxpY1wifSlcclxuICB2YXIgcGxhY2UyID0gYXdhaXQgTWFwcy5TZWFyY2goe3NlYXJjaFRleHQ6IFwiNDkuOTg4NDcsMTcuNDQyNzhcIn0pXHJcblxyXG4gIGNvbnNvbGUubG9nKHBsYWNlMSlcclxuICBjb25zb2xlLmxvZyhwbGFjZTIpXHJcblxyXG4gIE1hcHMuU2hvd1JvdXRlKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicm91dGVDb250YWluZXJcIiksIHtcclxuICAgIHdheXBvaW50MDogcGxhY2UxLkFzR2VvKCksXHJcbiAgICB3YXlwb2ludDE6IHBsYWNlMi5Bc0dlbygpLFxyXG4gICAgbW9kZTogXCJmYXN0ZXN0O2NhclwiLFxyXG4gICAgcmVwcmVzZW50YXRpb246IFwiZGlzcGxheVwiXHJcbiAgfSk7XHJcbn0pIl0sInNvdXJjZVJvb3QiOiIifQ==